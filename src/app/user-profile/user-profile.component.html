<mat-card appearance="outlined" class="m-4">
    <mat-card-header>
        <img mat-card-avatar src="assets/icons/pilots/{{user?.avatar}}.png" alt="User's avatar">
        <mat-card-title>
            {{ user?.username }}'s profile
        </mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <p>Email: {{ user?.email }} {{user?.isEmailConfirmed}}</p>

        @if (!changeFavoriteAirfield){
            <div class="flex items-baseline gap-2">
                <p>{{ 'profile.favorite-airfield' | translate }} {{ user?.favoriteAirfield?.territory?.identificationCode }}{{ user?.favoriteAirfield?.code }} {{ user?.favoriteAirfield?.fullName }}</p>
                <button mat-flat-button color="primary" (click)="retrieveAllAirfieldsAcceptVfr()">{{ 'profile.update-favorite-airfield' | translate }}</button>
            </div>
        } @else {
            <form [formGroup]="form">
                <mat-form-field>
                    <mat-label>{{ 'general.favorite-airfield' | translate }}</mat-label>
                    <input type="text"
                           placeholder="LFPG"
                           matInput
                           formControlName="favoriteAirfield"
                           [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete"  [displayWith]="airfieldUtils.displayFn">
                        @for (airfield of filteredAirfields | async; track airfield) {
                            <mat-option [value]="airfield">{{ airfield.territory.identificationCode }}{{ airfield.code}} - {{ airfield.fullName }}</mat-option>
                        }
                    </mat-autocomplete>
                </mat-form-field>
                <button mat-flat-button color="primary" (click)="updateFavoriteAirfield()">Update</button>
            </form>

        }


    </mat-card-content>
</mat-card>
